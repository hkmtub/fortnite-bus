<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortnite Bus</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="https://www.pngall.com/wp-content/uploads/5/Fortnite-Bus-PNG-Image.png">
    <!-- Import Google Fonts for Fortnite-style typography -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Import Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Offline Banner -->
    <div id="offlineBanner" class="offline-banner" style="display: none;">
        You are offline. Some features may not work.
    </div>

    <!-- Header -->
    <header class="header">
        <h1>Fortnite Bus</h1>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Route Selection -->
        <section class="route-section">
            <select id="routeSelect">
                <option value="0">University Union → Leroy & Beethoven St</option>
                <option value="1">UDC → Leroy & Front St</option>
                <option value="2">Leroy & Front St → University Union</option>
            </select>
            <div class="schedule-toggle">
                <label class="toggle-label">Schedule Type:</label>
                <div class="toggle-wrapper">
                    <button id="weekdayToggle" class="toggle-button active">Weekday</button>
                    <button id="weekendToggle" class="toggle-button">Weekend</button>
                </div>
                <div id="weekendDayToggle" class="weekend-day-toggle" style="display: none;">
                    <button id="saturdayToggle" class="toggle-button active">Saturday</button>
                    <button id="sundayToggle" class="toggle-button">Sunday</button>
                </div>
            </div>
            <div class="live-tracking-link">
                <a href="https://www.etaspot.net/service?stop_id=occt__UDC" target="_blank">Track Live on ETA SPOT</a>
            </div>
        </section>

        <!-- Timer -->
        <section class="timer-section">
            <div class="timer">
                <div class="timer-label">Next Bus Arrives At</div>
                <div id="nextBus" class="timer-display">Loading...</div>
                <div id="countdown" class="timer-countdown">Calculating...</div>
                <div class="timer-progress">
                    <div id="timerProgress" class="timer-progress-fill"></div>
                </div>
            </div>
        </section>

        <!-- Next Buses -->
        <section class="next-buses-section">
            <h2>Next Buses</h2>
            <ul id="nextBusesList">
                <li>Loading...</li>
            </ul>
        </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <button id="refreshBtn" title="Refresh">
            <i class="fas fa-sync-alt button-icon"></i>
            <i class="fas fa-spinner button-spinner" style="display: none;"></i>
        </button>
        <button id="scheduleBtn" title="Full Schedule">
            <i class="fas fa-calendar-alt"></i>
        </button>
        <button id="reportIssueBtn" title="Report Schedule Issue">
            <i class="fas fa-exclamation-circle"></i>
        </button>
        <a href="more.html" class="nav-button" title="More Bus Times">
            <i class="fas fa-bus"></i>
        </a>
    </nav>

    <!-- Full Schedule Modal -->
    <div id="scheduleModal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <h2>Full Schedule</h2>
            <div id="fullSchedule"></div>
            <div class="modal-actions">
                <button id="copyScheduleBtn" class="modal-button">Copy Schedule</button>
            </div>
        </div>
    </div>

    <!-- Joke Modal -->
    <div id="jokeModal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <h2>Here's a Joke!</h2>
            <p id="jokeText"></p>
            <div class="modal-actions">
                <label class="dont-show-label">
                    <input type="checkbox" id="dontShowJoke"> Don't show again today
                </label>
                <button id="closeJokeBtn" class="modal-button">Close</button>
            </div>
        </div>
    </div>

    <!-- Missed Bus Modal -->
    <div id="missedBusModal" class="modal">
        <div class="modal-content">
            <span class="close">×</span>
            <h2>Missed Buses Alert</h2>
            <p>You've missed <span id="missedBusCount">0</span> buses! Be more careful next time.</p>
            <div class="modal-actions">
                <button id="resetMissedBtn" class="modal-button">Reset Counter</button>
                <button id="closeMissedBtn" class="modal-button">Close</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
